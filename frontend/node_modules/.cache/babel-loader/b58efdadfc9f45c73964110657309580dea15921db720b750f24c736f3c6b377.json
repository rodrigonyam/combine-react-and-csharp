{"ast":null,"code":"import axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'https://localhost:7001/api';\nexport const authService = {\n  async login(credentials) {\n    try {\n      const response = await axios.post(`${API_URL}/auth/login`, credentials);\n      const {\n        token,\n        user\n      } = response.data;\n      if (token) {\n        localStorage.setItem('token', token);\n      }\n      return {\n        token,\n        user\n      };\n    } catch (error) {\n      var _error$response, _error$response$data;\n      throw new Error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Login failed');\n    }\n  },\n  async register(userData) {\n    try {\n      const response = await axios.post(`${API_URL}/auth/register`, userData);\n      const {\n        token,\n        user\n      } = response.data;\n      if (token) {\n        localStorage.setItem('token', token);\n      }\n      return {\n        token,\n        user\n      };\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      throw new Error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Registration failed');\n    }\n  },\n  logout() {\n    localStorage.removeItem('token');\n  },\n  getCurrentUser() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        const payload = JSON.parse(atob(token.split('.')[1]));\n        return payload;\n      } catch (error) {\n        console.error('Error parsing token:', error);\n        return null;\n      }\n    }\n    return null;\n  },\n  isAuthenticated() {\n    const token = localStorage.getItem('token');\n    if (!token) return false;\n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      const currentTime = Date.now() / 1000;\n      return payload.exp > currentTime;\n    } catch (error) {\n      return false;\n    }\n  }\n};","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","authService","login","credentials","response","post","token","user","data","localStorage","setItem","error","_error$response","_error$response$data","Error","message","register","userData","_error$response2","_error$response2$data","logout","removeItem","getCurrentUser","getItem","payload","JSON","parse","atob","split","console","isAuthenticated","currentTime","Date","now","exp"],"sources":["C:/Users/rodog/OneDrive/Desktop/workspaceexperiment/combine react and csharp/frontend/src/services/authService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'https://localhost:7001/api';\r\n\r\nexport const authService = {\r\n  async login(credentials) {\r\n    try {\r\n      const response = await axios.post(`${API_URL}/auth/login`, credentials);\r\n      const { token, user } = response.data;\r\n      \r\n      if (token) {\r\n        localStorage.setItem('token', token);\r\n      }\r\n      \r\n      return { token, user };\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.message || 'Login failed');\r\n    }\r\n  },\r\n\r\n  async register(userData) {\r\n    try {\r\n      const response = await axios.post(`${API_URL}/auth/register`, userData);\r\n      const { token, user } = response.data;\r\n      \r\n      if (token) {\r\n        localStorage.setItem('token', token);\r\n      }\r\n      \r\n      return { token, user };\r\n    } catch (error) {\r\n      throw new Error(error.response?.data?.message || 'Registration failed');\r\n    }\r\n  },\r\n\r\n  logout() {\r\n    localStorage.removeItem('token');\r\n  },\r\n\r\n  getCurrentUser() {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      try {\r\n        const payload = JSON.parse(atob(token.split('.')[1]));\r\n        return payload;\r\n      } catch (error) {\r\n        console.error('Error parsing token:', error);\r\n        return null;\r\n      }\r\n    }\r\n    return null;\r\n  },\r\n\r\n  isAuthenticated() {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return false;\r\n    \r\n    try {\r\n      const payload = JSON.parse(atob(token.split('.')[1]));\r\n      const currentTime = Date.now() / 1000;\r\n      return payload.exp > currentTime;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}